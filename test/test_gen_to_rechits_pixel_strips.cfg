# this cfg will run single/multi particle pt-gun
# the pt of the particles will be uniformly
# distributed in the user-specifed pt-range 

# this cfg will then run the simulation and reconstruction
# chain upto debug tracks from a simple helix fit

process mytest =  {
 
    # initialize  MessageLogger
    include "FWCore/MessageLogger/data/MessageLogger.cfi"

    service = Timing{ }

    service = SimpleMemoryCheck{ }

    service = RandomNumberGeneratorService
    {
        untracked uint32 sourceSeed = 135799753
        PSet moduleSeeds =
        {
            untracked uint32 VtxSmeared = 123456789
            untracked uint32 g4SimHits = 194098651
            untracked uint32 mix = 9823
            untracked uint32 siStripDigis = 563
            untracked uint32 siPixelDigis = 653
        }
    }
    include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"

    untracked PSet maxEvents = {untracked int32 input = 10}

   source = FlatRandomPtGunSource
   {
     untracked PSet PGunParameters =
      {	
         untracked vint32 PartID = { 13, -13, 13, -13, 13, -13 }
         untracked double MinEta = -2.5
         untracked double MaxEta = 2.5
         untracked double MinPhi = -3.14159265358979323846 # must be in radians
         untracked double MaxPhi =  3.14159265358979323846
         untracked double MinPt  = 19.99
         untracked double MaxPt  = 20.01
      }
      untracked int32 Verbosity = 0 # set to 1 (or greater)  for printouts
   }

   include "IOMC/EventVertexGenerators/data/VtxSmearedGauss.cfi"
   include "SimG4Core/Application/data/SimG4Object.cfi"
##    replace g4SimHits.Generator.HepMCProductLabel = "source"

    # Mixing Module
    include "SimGeneral/MixingModule/data/mix_none.cfi"

    # initialize magnetic field
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
    include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

    #Tracker Fake Condition
    #
    include "CalibTracker/Configuration/data/SiPixel_FakeGain.cff"
    include "CalibTracker/Configuration/data/SiStrip_FakeGain.cff"
    include "CalibTracker/Configuration/data/SiStrip_FakeNoise.cff"
    include "CalibTracker/Configuration/data/SiStrip_FakePedestals.cff"
    include "CalibTracker/Configuration/data/SiStrip_FakeLorentzAngle.cff"

   # TRACKER digitization sequence
    include "SimTracker/Configuration/data/SimTracker.cff"

    # TRACKER LocalReco sequence
    include "RecoLocalTracker/Configuration/data/RecoLocalTracker.cff"

	module testassociator = TestAssociator{
	      bool associateStrip = true
	      bool associatePixel = true
	      bool associateRecoTracks = false
	      vstring ROUList = {
		#For running only strip or pixel comment out the appropriate strings
		#TIB
		"TrackerHitsTIBLowTof","TrackerHitsTIBHighTof",
		#TID
		"TrackerHitsTIDLowTof","TrackerHitsTIDHighTof",
		#TOB
		"TrackerHitsTOBLowTof","TrackerHitsTOBHighTof",
		#TEC
		"TrackerHitsTECLowTof","TrackerHitsTECHighTof",
		#BPIX
		"TrackerHitsPixelBarrelLowTof","TrackerHitsPixelBarrelHighTof",
		#FPIX
		"TrackerHitsPixelEndcapLowTof","TrackerHitsPixelEndcapHighTof"} 	
        }



    module OutPut = PoolOutputModule {
	untracked string fileName = 'test_6muons.root'
    }

   path p = {VtxSmeared, g4SimHits, mix, trDigi, trackerlocalreco, testassociator}

    endpath ep ={OutPut}
    
}

